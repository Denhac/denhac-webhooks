events {}

http {
        server {

                root /var/www/html/public;

                index index.php index.html index.htm index.nginx-debian.html;

                # server_name webhooks.denhac.org;

                listen 80 default;

                # ssl_client_certificate /etc/ssl/certs/DigiCert_Global_Root_CA.pem;
                # ssl_verify_client optional;
                # ssl_verify_depth 2;

                location / {
                        try_files $uri $uri/ /index.php?$query_string;
                }

                location ~ \.php$ {
                #         # include snippets/fastcgi-php.conf;

                        fastcgi_pass app:9000;
                        fastcgi_index public/index.php;
                        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                        fastcgi_param X_CLIENT_CERTIFICATE "-----BEGIN%20CERTIFICATE-----%0AMIIE7TCCA9WgAwIBAgISBJJw4UPddZgmudL40NtGXRcvMA0GCSqGSIb3DQEBCwUA%0AMDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD%0AEwJSMzAeFw0yMzExMTcwMzE4MzBaFw0yNDAyMTUwMzE4MjlaMBQxEjAQBgNVBAMT%0ACXNsYWNrLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ%2BbnYLo%0AvsfIGl6DoQ%2FdeGI6TBalW4xtUuD5iDpstvsx2120dAJRep5gf4d5Q%2BLjxH5LzRpn%0AsOsgpn%2BHL%2BIgHq3pFxnOR%2BUHCQfSh1SzGTOGHW3OsuR5F7EFY0svg%2FiwffqZp4BR%0AKpM1XvamRK1he%2F2L5Bccb%2B1aqRxegTdW0rtjJYOlGGO6FHRDXXkkZLYXKSeaaBXX%0Aid86AD3hfFHp%2F9PYGSbX6%2F5%2FO4GxLceQJ9Ki3wEj%2FxVQgvwReQzHKpvbRZzWGD12%0AdD%2FWitQ0jsgoNS8WI8N0M%2BQAnQCxr%2BDDlw6qy9%2BfDD2wHEJOA5U%2FkzkxkC4ZXdOU%0Agd0%2BVEjIQlyWTkUCAwEAAaOCAhkwggIVMA4GA1UdDwEB%2FwQEAwIFoDAdBgNVHSUE%0AFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDAYDVR0TAQH%2FBAIwADAdBgNVHQ4EFgQU%0AEy%2FVQ49RWrgoAoWmDEfR%2FOjJhD8wHwYDVR0jBBgwFoAUFC6zF7dYVsuuUAlA5h%2Bv%0AnYsUwsYwVQYIKwYBBQUHAQEESTBHMCEGCCsGAQUFBzABhhVodHRwOi8vcjMuby5s%0AZW5jci5vcmcwIgYIKwYBBQUHMAKGFmh0dHA6Ly9yMy5pLmxlbmNyLm9yZy8wIQYD%0AVR0RBBowGIILKi5zbGFjay5jb22CCXNsYWNrLmNvbTATBgNVHSAEDDAKMAgGBmeB%0ADAECATCCAQUGCisGAQQB1nkCBAIEgfYEgfMA8QB2AEiw42vapkc0D%2BVqAvqdMOsc%0AUgHLVt0sgdm7v6s52IRzAAABi9uAcwgAAAQDAEcwRQIgQl7vmzePYxg1Zoqpw96z%0AFrToOJQCCPjQeUxtS7lwycsCIQCVKG4%2BWW2wWzlRhGHhj6PJbLf7It4WNqIwawkX%0A9JQQ7AB3ADtTd3U%2BLbmAToswWwb%2BQDtn2E%2FD9Me9AA0tcm%2Fh%2BtQXAAABi9uAcwkA%0AAAQDAEgwRgIhAPdaIZiOkKCogTB61WEdq0tWsm%2FZGoKJ35BDQUshnnp0AiEAh3v%2B%0ASHkrgcHXDnm6CJvsDsONcyfs6%2BB1ElELvarQPDAwDQYJKoZIhvcNAQELBQADggEB%0AAB9bHNzgzVx%2FtfgvFR9X4YrrKU2VkwcAkpAU11eAsfIxJEDSxvtheuQURHkuaDPK%0AeNplS8eT2ehJagMj%2BGG%2B%2FPsKSrpXa3BFVixhToTcZCqAtyxdTHg0ig5X%2FPH8PaqT%0AZZo%2FqzyIrGtbi9SludsD3%2BUtA5qMHHQxlt7ejmdT463AmhPGnkc6NzBdH2ni56Ak%0A46cyfun2tJJt0lheCRZH7AfdOEZmHUlGeC9c57hqtIHkK0eYeU6x1T%2B05m0MwWDK%0AUubOMdedEpeFFZb%2BRittuq475Z3GY5LxJHSrdCnaj0m5Md%2B8iP7aoNsGIyl7xAB1%0At%2Bf6ZAv%2Ff7Vg6%2F1LEGDWQrc%3D%0A-----END%20CERTIFICATE-----";
                        fastcgi_param X_CLIENT_VERIFY "SUCCESS";
                        include fastcgi_params;
                }

                location ~ /\.ht {
                        deny all;
                }

        #     listen [::]:443 ssl ipv6only=on; # managed by Certbot
        #     listen 443 ssl; # managed by Certbot
        #     ssl_certificate /etc/letsencrypt/live/webhooks.denhac.org/fullchain.pem; # managed by Certbot
        #     ssl_certificate_key /etc/letsencrypt/live/webhooks.denhac.org/privkey.pem; # managed by Certbot
        #     include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
        #     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

        }

        # server {
        # if ($host = webhooks.denhac.org) {
        #         return 301 https://$host$request_uri;
        # } # managed by Certbot


        #         listen 80 default_server;
        #         listen [::]:80 default_server;

        #         server_name webhooks.denhac.org;
        # return 404; # managed by Certbot
        # }
}